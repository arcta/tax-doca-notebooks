<svg width="900" height="430" version="1.1" xmlns="http://www.w3.org/2000/svg">
<defs>
  <linearGradient id="arrow" x1="0" x2="1" y1="0" y2="0">
    <stop offset="0%" stop-color="white"/>
    <stop offset="100%" stop-color="#bcd"/>
  </linearGradient>
</defs> 
<g transform="translate(60,80) scale(0.5)">
  <g stroke="#abc">
    <rect x="-90" y="-80" width="430" height="710"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="30" ry="30" stroke-linejoin="round"/>
      
    <rect x="-30" y="58"   width="310" height="477"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="14" ry="14" stroke-linejoin="round"/>
    
    <path fill="none" stroke-width="16" stroke-dasharray="2,2" d="M100,-80 L100,630"></path>
    <path fill="none" stroke-width="16" d="M100,-80 L100,10 M100,50 L100,598"></path>
      
    <path fill="none" stroke-width="8" d="M100,570 L670,570"></path>
      
    <rect x="0" y="-60" width="200" height="50"
          fill="violet" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="100" y="73" width="150" height="191"
          fill="none" stroke-width="6" rx="10" ry="10" stroke-linejoin="round"/>
      
    <rect x="0" y="100" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="170" width="200" height="50"
          fill="#39b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="265" r="25" fill="#abc"/>
      
    <rect x="100" y="310" width="150" height="191"
          fill="none" stroke-width="6" rx="10" ry="10" stroke-linejoin="round"/>
      
    <rect x="0" y="335" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="405" width="200" height="50"
          fill="#4d9" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="500" r="25" fill="#abc"/>
  </g>
  <g stroke="none" fill="black" style="font:1.5em sans-serif,monospace">
    <text x="100" y="-90" text-anchor="middle">Encoder</text>
    <text x="100" y="-30" text-anchor="middle">ViewToSequence</text>
    <text x="100" y="131" text-anchor="middle">GroupNorm</text>
    <text x="100" y="201" text-anchor="middle">Attention</text>
    <text x="100" y="271" text-anchor="middle">+</text>
    <text x="100" y="367" text-anchor="middle">GroupNorm</text>
    <text x="100" y="437" text-anchor="middle">MLP</text>
    <text x="100" y="507" text-anchor="middle">+</text>
    <text x="220" y="598" text-anchor="middle">Pass-Through</text>
    <text x="405" y="555" text-anchor="middle">Bridge</text>
    <text x="-350" y="-40" transform="rotate(-90)" text-anchor="left">TransformerBlock</text>
  </g>
</g>
<g transform="translate(340,80) scale(0.5)">
  <g stroke="#abc">
    <rect x="-90" y="-80" width="430" height="710"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="30" ry="30" stroke-linejoin="round"/>
      
    <!--rect x="-30" y="58" width="310" height="477"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="10" ry="10" stroke-linejoin="round"/-->
    
    <path fill="none" stroke-width="16" stroke-dasharray="2,2" d="M100,-80 L100,630"></path>
    <path fill="none" stroke-width="16" d="M100,-80 L100,10 M100,50 L100,613"></path>
      
    <rect x="0" y="-60" width="200" height="50"
          fill="pink" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="100" y="330" width="150" height="191"
          fill="none" stroke-width="6" rx="10" ry="10" stroke-linejoin="round"/>
      
    <rect x="0" y="445" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="375" width="200" height="50"
          fill="#39b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="330" r="25" fill="#abc"/>
      
    <rect x="100" y="95" width="150" height="191"
          fill="none" stroke-width="6" rx="10" ry="10" stroke-linejoin="round"/>
      
    <rect x="0" y="210" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="140" width="200" height="50"
          fill="#4d9" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="95" r="25" fill="#abc"/>
      
    <circle cx="100" cy="570" r="25" fill="#abc"/>
  </g>
  <g stroke="none" fill="black" style="font:1.5em sans-serif,monospace">
    <text x="100" y="-90" text-anchor="middle">Decoder</text>
    <text x="100" y="-30" text-anchor="middle">SequenceToView</text>
    <text x="100" y="101" text-anchor="middle">+</text>
    <text x="100" y="171" text-anchor="middle">MLP</text>
    <text x="100" y="241" text-anchor="middle">GroupNorm</text>
    <text x="100" y="337" text-anchor="middle">+</text>
    <text x="100" y="407" text-anchor="middle">Attention</text>
    <text x="100" y="477" text-anchor="middle">GroupNorm</text>
    <text x="100" y="576" text-anchor="middle">+</text>
  </g>
</g>
<g transform="translate(630,90) scale(0.5)">
  <path fill="url(#arrow)" d="M170,548 L420,548 L170,390 Z"></path>
  <rect fill="none" stroke-width="8" stroke="#abc"
        x="50" y="-90" width="300" height="580" rx="60" ry="60" stroke-linejoin="round"/>
  <rect fill="#fff" x="30" y="-100" width="350" height="40"/>      
  <rect fill="none" stroke-width="3" stroke-dasharray="3,3" stroke="#abc"
        x="-30" y="-80" width="260" height="640" rx="20" ry="20" stroke-linejoin="round"/>
  <rect fill="none" stroke-width="3" stroke-dasharray="3,3" stroke="#abc"
        x="270" y="-80" width="160" height="490" rx="20" ry="20" stroke-linejoin="round"/>
        
  <path stroke="violet" d="M0,-50 L100,-50" fill="none" stroke-width="24"></path>
  <path stroke="pink" d="M300,-50 L400,-50" fill="none" stroke-width="24"></path>
    
  <g transform="translate(0,0)" fill="none" stroke-width="20">
    <path stroke="cyan" d="M0,0 L100,0"></path>
    <path stroke="#39b" d="M0,20 L100,20"></path>  
    <path stroke="cyan" d="M0,40 L100,40"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>
    <path stroke-width="5" stroke="#abc" d="M50,100 L350,100"></path>
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,20 L400,20"></path>  
    <path stroke="#39b" d="M300,40 L400,40"></path>  
    <path stroke="cyan" d="M300,60 L400,60"></path>  
  </g>
    
  <g transform="translate(0,140)" fill="none" stroke-width="20">
    <path stroke="cyan" d="M0,0 L100,0"></path>
    <path stroke="#39b" d="M0,20 L100,20"></path>  
    <path stroke="cyan" d="M0,40 L100,40"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>
    <path stroke-width="5" stroke="#abc" d="M50,100 L350,100"></path>
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,20 L400,20"></path>  
    <path stroke="#39b" d="M300,40 L400,40"></path>  
    <path stroke="cyan" d="M300,60 L400,60"></path>  
  </g>
    
  <g transform="translate(0,280)" fill="none" stroke-width="20">
    <path stroke="cyan" d="M0,0 L100,0"></path>
    <path stroke="#39b" d="M0,20 L100,20"></path>  
    <path stroke="cyan" d="M0,40 L100,40"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path> 
    <path stroke-width="5" stroke="#abc" d="M50,100 L350,100"></path>
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,20 L400,20"></path>  
    <path stroke="#39b" d="M300,40 L400,40"></path>  
    <path stroke="cyan" d="M300,60 L400,60"></path>  
  </g>
    
  <g transform="translate(140,540) rotate(270)" fill="none" stroke-width="20">
    <path stroke="cyan" d="M0,0 L100,0"></path>
    <path stroke="#39b" d="M0,20 L100,20"></path>  
    <path stroke="cyan" d="M0,40 L100,40"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>  
  </g>

  <g style="font-size:1.25em">
    <text x="50" y="-90" text-anchor="middle">Encoder</text>
    <text x="350" y="-90" text-anchor="middle">Decoder</text>
    <text x="170" y="430" text-anchor="middle">Bottleneck</text>
    <text x="308" y="535" text-anchor="middle">MeanReduce</text>
    <text x="360" y="570" text-anchor="middle">Embedding</text>
  </g>
</g>
</svg>