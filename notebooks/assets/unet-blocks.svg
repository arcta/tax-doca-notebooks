<svg width="900" height="430" version="1.1" xmlns="http://www.w3.org/2000/svg">
<defs>
  <linearGradient id="arrow" x1="0" x2="1" y1="0" y2="0">
    <stop offset="0%" stop-color="white"/>
    <stop offset="100%" stop-color="#bcd"/>
  </linearGradient>
</defs> 
<g transform="translate(50,80) scale(0.5)">
  <g stroke="#abc">
    <rect x="-65" y="-80" width="490" height="710"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="30" ry="30" stroke-linejoin="round"/>
      
    <rect x="-20" y="-55" width="390" height="542"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="30" ry="30" stroke-linejoin="round"/>
      
    <rect x="68" y="-35" width="242" height="480"
          fill="none" stroke-width="6" rx="30" ry="30" stroke-linejoin="round"/>
      
    <rect x="68" y="-25" width="182" height="400"
          fill="none" stroke-width="6" rx="26" ry="26" stroke-linejoin="round"/>
      
    <path fill="none" stroke="white" stroke-width="66" d="M60,-40 L60,460"></path>
    <path fill="none" stroke-width="16" d="M100,-80 L100,630"></path>
    <path fill="none" stroke-width="8" d="M100,505 L770,505"></path>
      
    <rect x="0" y="0" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="70" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="140" width="200" height="50"
          fill="#4d9" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="150" y="350" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="210" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="280" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="375" r="25" fill="#abc"/>
      
    <circle cx="100" cy="445" r="25" fill="#abc"/>
      
    <rect x="150" y="420" width="200" height="50"
          fill="#4f7" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="540" width="200" height="50"
          fill="violet" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
  </g>
  <g stroke="none" fill="black" style="font:1.5em sans-serif,monospace">
    <text x="100" y="-90" text-anchor="middle">DownsampleBlock</text>
    <text x="100" y="31" text-anchor="middle">3 X 3 Conv</text>
    <text x="100" y="101" text-anchor="middle">GroupNorm</text>
    <text x="100" y="171" text-anchor="middle">GELU</text>
    <text x="250" y="381" text-anchor="middle">1 X 1 Conv</text>
    <text x="100" y="241" text-anchor="middle">3 X 3 Conv</text>
    <text x="100" y="311" text-anchor="middle">GroupNorm</text>
    <text x="100" y="382" text-anchor="middle">+</text>
    <text x="100" y="452" text-anchor="middle">×</text>
    <text x="250" y="451" text-anchor="middle">Attn OR ReLU</text>
    <text x="100" y="571" text-anchor="middle">MaxPool</text>
    <text x="295" y="530" text-anchor="middle">Pass-Through</text>
    <text x="500" y="493" text-anchor="middle">Bridge</text>
    <text x="30" y="-260" transform="rotate(90)" text-anchor="left">Residual connection</text>
    <text x="60" y="-320" transform="rotate(90)" text-anchor="left">Self-Attention</text>
    <text x="150" y="-377" transform="rotate(90)" text-anchor="left">ConvBlock</text>
  </g>
</g>
<g transform="translate(380,80) scale(0.5)">
  <g stroke="#abc">
    <rect x="-90" y="-80" width="480" height="710"
          fill="none" stroke-width="3" stroke-dasharray="3,3" rx="30" ry="30" stroke-linejoin="round"/>
      
    <rect x="68" y="40" width="182" height="400"
          fill="none" stroke-width="6" rx="26" ry="26" stroke-linejoin="round"/>

    <rect x="68" y="-30" width="242" height="480"
          fill="none" stroke-width="6" rx="32" ry="32" stroke-linejoin="round"/>

    <path fill="none" stroke="white" stroke-width="66" d="M60,-40 L60,460"></path>
    <path fill="none" stroke-width="16" d="M100,-80 L100,630"></path>
      
    <!--rect x="150" y="-55" width="200" height="50"
          fill="#4f7" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/-->
      
    <circle cx="100" cy="-30" r="25" fill="#abc"/>
      
    <circle cx="100" cy="40" r="25" fill="#abc"/>
      
    <!--rect x="150" y="15" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/-->
      
    <rect x="0" y="85" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="155" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="225" width="200" height="50"
          fill="#4d9" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>

    <rect x="0" y="295" width="200" height="50"
          fill="cyan" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <rect x="0" y="365" width="200" height="50"
          fill="#49b" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
      
    <circle cx="100" cy="505" r="25" fill="#abc"/>
    <circle cx="100" cy="505" r="35" fill="none" stroke="#abc" stroke-width="6" stroke-dasharray="2,3"/>
      
    <rect x="0" y="555" width="200" height="50"
          fill="pink" stroke-width="6" rx="6" ry="6" stroke-linejoin="round"/>
  </g>
  <g stroke="none" fill="black" style="font:1.5em sans-serif,monospace">
    <text x="100" y="-90" text-anchor="middle">UpsampleBlock</text>
    <!--text x="250" y="-24" text-anchor="middle">Attn OR ReLU</text-->
    <text x="100" y="-24" text-anchor="middle">×</text>
    <text x="100" y="46" text-anchor="middle">+</text>
    <text x="100" y="116" text-anchor="middle">GroupNorm</text>
    <text x="100" y="186" text-anchor="middle">3 X 3 Conv</text>
    <text x="100" y="256" text-anchor="middle">GELU</text>
    <text x="100" y="326" text-anchor="middle">GroupNorm</text>
    <text x="100" y="396" text-anchor="middle">3 X 3 Conv</text>
    <!--text x="250" y="46" text-anchor="middle">1 X 1 Conv</text-->
    <text x="100" y="511" text-anchor="middle">+</text>
    <text x="-8" y="493" text-anchor="middle">Attention-Gate</text>
    <text x="100" y="585" text-anchor="middle">ConvTranspose</text>
  </g>
</g>
<g transform="translate(670,80) scale(0.5)">
  <path fill="url(#arrow)" d="M170,548 L420,548 L170,390 Z"></path>
  <rect fill="none" stroke-width="8" stroke="#abc"
        x="50" y="-90" width="300" height="580" rx="60" ry="60" stroke-linejoin="round"/>
  <rect fill="#fff" x="30" y="-100" width="350" height="70"/>      
  <rect fill="none" stroke-width="3" stroke-dasharray="3,3" stroke="#abc"
        x="-30" y="-30" width="260" height="590" rx="20" ry="20" stroke-linejoin="round"/>
  <rect fill="none" stroke-width="3" stroke-dasharray="3,3" stroke="#abc"
        x="270" y="-30" width="160" height="440" rx="20" ry="20" stroke-linejoin="round"/>
        
  <g transform="translate(0,0)" fill="none" stroke-width="12">
    <path stroke="#49b" d="M0,0 L100,0"></path>
    <path stroke="cyan" d="M0,12 L100,12"></path>  
    <path stroke="#4d9" d="M0,24 L100,24"></path>  
    <path stroke="#49b" d="M0,36 L100,36"></path>
    <path stroke="cyan" d="M0,48 L100,48"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>  
    <path stroke="violet" d="M0,90 L100,90"></path>
    <path stroke-width="4" stroke="#abc" d="M50,75 L350,75"></path>      
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,12 L400,12"></path>  
    <path stroke="#49b" d="M300,24 L400,24"></path>  
    <path stroke="#4d9" d="M300,36 L400,36"></path>
    <path stroke="cyan" d="M300,48 L400,48"></path>
    <path stroke="#49b" d="M300,60 L400,60"></path>
    <path stroke="pink" d="M300,90 L400,90"></path>  
  </g>
    
  <g transform="translate(0,140)" fill="none" stroke-width="12">
    <path stroke="#49b" d="M0,0 L100,0"></path>
    <path stroke="cyan" d="M0,12 L100,12"></path>  
    <path stroke="#4d9" d="M0,24 L100,24"></path>  
    <path stroke="#49b" d="M0,36 L100,36"></path>
    <path stroke="cyan" d="M0,48 L100,48"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>  
    <path stroke="violet" d="M0,90 L100,90"></path>
    <path stroke-width="4" stroke="#abc" d="M50,75 L350,75"></path>      
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,12 L400,12"></path>  
    <path stroke="#49b" d="M300,24 L400,24"></path>  
    <path stroke="#4d9" d="M300,36 L400,36"></path>
    <path stroke="cyan" d="M300,48 L400,48"></path>
    <path stroke="#49b" d="M300,60 L400,60"></path>
    <path stroke="pink" d="M300,90 L400,90"></path>  
  </g>
    
  <g transform="translate(0,280)" fill="none" stroke-width="12">
    <path stroke="#49b" d="M0,0 L100,0"></path>
    <path stroke="cyan" d="M0,12 L100,12"></path>  
    <path stroke="#4d9" d="M0,24 L100,24"></path>  
    <path stroke="#49b" d="M0,36 L100,36"></path>
    <path stroke="cyan" d="M0,48 L100,48"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>  
    <path stroke="violet" d="M0,90 L100,90"></path>
    <path stroke-width="4" stroke="#abc" d="M50,75 L350,75"></path>      
    <path stroke="#4d9" d="M300,0 L400,0"></path>
    <path stroke="cyan" d="M300,12 L400,12"></path>  
    <path stroke="#49b" d="M300,24 L400,24"></path>  
    <path stroke="#4d9" d="M300,36 L400,36"></path>
    <path stroke="cyan" d="M300,48 L400,48"></path>
    <path stroke="#49b" d="M300,60 L400,60"></path>
    <path stroke="pink" d="M300,90 L400,90"></path>  
  </g>
    
  <g transform="translate(135,540) rotate(270)" fill="none" stroke-width="12">
    <path stroke="#49b" d="M0,0 L100,0"></path>
    <path stroke="cyan" d="M0,12 L100,12"></path>  
    <path stroke="#4d9" d="M0,24 L100,24"></path>  
    <path stroke="#49b" d="M0,36 L100,36"></path>
    <path stroke="cyan" d="M0,48 L100,48"></path>  
    <path stroke="#4d9" d="M0,60 L100,60"></path>  
    <path stroke="violet" d="M0,72 L100,72"></path>
  </g>

  <g style="font-size:1.25em">
    <text x="50" y="-40" text-anchor="middle">Encoder</text>
    <text x="350" y="-40" text-anchor="middle">Decoder</text>
    <text x="170" y="430" text-anchor="middle">Bottleneck</text>
    <text x="308" y="535" text-anchor="middle">AvgPool</text>
    <text x="360" y="570" text-anchor="middle">Embedding</text>
  </g>
</g>
</svg>